// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/go-kratos/kratos/v2"
	"prometheus-manager/app/prom_server/internal/biz"
	"prometheus-manager/app/prom_server/internal/conf"
	"prometheus-manager/app/prom_server/internal/data"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/alarmhistory"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/alarmpage"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/alarmrealtime"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/api"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/captcha"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/chatgroup"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/dataimpl"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/endpoint"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/msg"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/notify"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/ping"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/promdict"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/role"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/strategy"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/strategygroup"
	"prometheus-manager/app/prom_server/internal/data/repositiryimpl/user"
	"prometheus-manager/app/prom_server/internal/server"
	"prometheus-manager/app/prom_server/internal/service"
	"prometheus-manager/app/prom_server/internal/service/alarmservice"
	"prometheus-manager/app/prom_server/internal/service/authservice"
	"prometheus-manager/app/prom_server/internal/service/dictservice"
	"prometheus-manager/app/prom_server/internal/service/promservice"
	"prometheus-manager/app/prom_server/internal/service/systemservice"
	"prometheus-manager/pkg/helper/plog"
)

import (
	_ "go.uber.org/automaxprocs"
)

// Injectors from wire.go:

// wireApp init kratos application.
func wireApp(string2 *string) (*kratos.App, func(), error) {
	confBefore := before()
	bootstrap, err := conf.LoadConfig(string2, confBefore)
	if err != nil {
		return nil, nil, err
	}
	confServer := bootstrap.Server
	log := bootstrap.Log
	logger := plog.NewLogger(log)
	dataData, cleanup, err := data.NewData(bootstrap, logger)
	if err != nil {
		return nil, nil, err
	}
	apiWhite := bootstrap.ApiWhite
	httpServer := server.NewHTTPServer(confServer, dataData, apiWhite, logger)
	pingRepo := ping.NewPingRepo(dataData, logger)
	pingBiz := biz.NewPingRepo(pingRepo, logger)
	pingService := service.NewPingService(pingBiz, logger)
	promDictRepo := promdict.NewPromDictRepo(dataData, logger)
	dictBiz := biz.NewDictBiz(promDictRepo, logger)
	dictserviceService := dictservice.NewDictService(dictBiz, logger)
	v := data.GetWriteChangeGroupChannel()
	v2 := data.GetWriteRemoveGroupChannel()
	strategyGroupRepo := strategygroup.NewStrategyGroupRepo(dataData, v, v2, logger)
	strategyRepo := strategy.NewStrategyRepo(dataData, v, v2, strategyGroupRepo, logger)
	strategyXBiz := biz.NewStrategyBiz(strategyRepo, logger)
	strategyService := promservice.NewStrategyService(strategyXBiz, logger)
	strategyGroupBiz := biz.NewStrategyGroupBiz(strategyGroupRepo, logger)
	groupService := promservice.NewGroupService(strategyGroupBiz, logger)
	pageRepo := alarmpage.NewAlarmPageRepo(dataData, logger)
	alarmPageBiz := biz.NewPageBiz(pageRepo, logger)
	alarmPageService := alarmservice.NewAlarmPageService(alarmPageBiz, logger)
	historyRepo := alarmhistory.NewAlarmHistoryRepo(dataData, logger)
	msgRepo := msg.NewMsgRepo(dataData, logger)
	dataRepo := dataimpl.NewDataRepo(dataData, logger)
	alarmRealtimeRepo := alarmrealtime.NewAlarmRealtime(dataData, logger)
	alarmRealtimeBiz := biz.NewAlarmRealtime(dataRepo, alarmRealtimeRepo, logger)
	historyBiz := biz.NewHistoryBiz(historyRepo, msgRepo, alarmRealtimeBiz, logger)
	hookService := alarmservice.NewHookService(historyBiz, logger)
	historyService := alarmservice.NewHistoryService(historyBiz, logger)
	userRepo := user.NewUserRepo(dataData, logger)
	roleRepo := role.NewRoleRepo(dataData, logger)
	userBiz := biz.NewUserBiz(userRepo, dataRepo, roleRepo, logger)
	captchaRepo := captcha.NewCaptchaRepo(dataData, logger)
	captchaBiz := biz.NewCaptchaBiz(captchaRepo, logger)
	authService := authservice.NewAuthService(userBiz, captchaBiz, logger)
	userService := systemservice.NewUserService(userBiz, logger)
	apiRepo := api.NewApiRepo(dataData, logger)
	roleBiz := biz.NewRoleBiz(roleRepo, apiRepo, dataRepo, logger)
	roleService := systemservice.NewRoleService(roleBiz, logger)
	endpointRepo := endpoint.NewEndpointRepo(dataData, logger)
	endpointBiz := biz.NewEndpointBiz(endpointRepo, logger)
	endpointService := promservice.NewEndpointService(endpointBiz, logger)
	apiBiz := biz.NewApiBiz(apiRepo, dataRepo, logger)
	apiService := systemservice.NewApiService(apiBiz, logger)
	chatGroupRepo := chatgroup.NewChatGroupRepo(dataData, logger)
	chatGroupBiz := biz.NewChatGroupBiz(chatGroupRepo, logger)
	chatGroupService := promservice.NewChatGroupService(chatGroupBiz, logger)
	notifyRepo := notify.NewNotifyRepo(dataData, logger)
	notifyBiz := biz.NewNotifyBiz(notifyRepo, logger)
	notifyService := promservice.NewNotifyService(notifyBiz, logger)
	realtimeService := alarmservice.NewRealtimeService(alarmRealtimeBiz, alarmPageBiz, logger)
	serverHttpServer := server.RegisterHttpServer(httpServer, pingService, dictserviceService, strategyService, groupService, alarmPageService, hookService, historyService, authService, userService, roleService, endpointService, apiService, chatGroupService, notifyService, realtimeService)
	grpcServer := server.NewGRPCServer(confServer, dataData, apiWhite, logger)
	serverGrpcServer := server.RegisterGrpcServer(grpcServer, pingService, dictserviceService, strategyService, groupService, alarmPageService, hookService, historyService, userService, roleService, endpointService, apiService, chatGroupService, notifyService, realtimeService)
	v3 := data.GetReadChangeGroupChannel()
	v4 := data.GetReadRemoveGroupChannel()
	alarmEvent, err := server.NewAlarmEvent(bootstrap, v3, v4, hookService, groupService, logger)
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	serverServer := server.NewServer(serverHttpServer, serverGrpcServer, alarmEvent)
	app := newApp(serverServer, logger)
	return app, func() {
		cleanup()
	}, nil
}
